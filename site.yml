---
- name: Provisioning Server Setup
  hosts: localhost
  connection: local
  become: yes

  roles:
    - role: common
      tags: 
        # Legacy tags (backward compatibility)
        - common
        - packages
        - ssh_setup  
        - network_setup
        - docker_setup
        # Optimized infrastructure tags
        - foundation
        - services_install
        - system_config
        # Operation-specific tags
        - package_upgrade
        - maintenance

    - role: network_config
      tags:
        # Legacy tags (backward compatibility)
        - network_config
        - network_setup
        # Optimized infrastructure tags
        - network_infra
        - foundation
        # Configuration tags
        - network_config_update
        - maintenance

    - role: netboot  
      tags:
        # Legacy tags (backward compatibility)
        - netboot
        - pxe_setup
        # Optimized service tags
        - services_install
        - dns_config
        - dns_dhcp
        # Operation-specific tags
        - validation
        - quick

    - role: web
      tags:
        # Legacy tags (backward compatibility)
        - web
        - web_setup
        - autoinstall_templates
        # Optimized service tags
        - services_install
        - web_config
        - autoinstall_config
        # Operation-specific tags
        - templates
        - permissions
        - validation
        - quick

    - role: iso_preparation
      tags:
        # Legacy tags (backward compatibility)
        - iso_preparation
        - iso_processing  
        # Optimized operation tags
        - iso_download
        - iso_management
        - expensive

    - role: validation
      tags:
        # Legacy tags (backward compatibility)
        - validation
        # Optimized operation tags
        - validation
        - quick
        - health_check
